"""
Модуль реализации алгоритма задания №2 (вариант 8):
Определение количества чисел, которые совпадают или имеют совпадающую
'перевёрнутую' версию в другом массиве.
"""

def reverse_number(n: int) -> int:
    """
    Возвращает перевёрнутую версию целого числа.

    Примеры:
        123 → 321  

    Args:
        n (int): Число, которое требуется развернуть.

    Returns:
        int: Перевёрнутое число с тем же знаком.
    """
    sign = -1 if n < 0 else 1
    n = abs(n)
    reversed_str = str(n)[::-1]
    return sign * int(reversed_str)


def count_common_numbers(arr1, arr2):
    """
    Подсчитывает количество чисел, общих для двух массивов,
    включая случаи, когда совпадает перевёрнутая версия числа.

    Логика работы:
        1. Преобразуем второй массив в множество для быстрого поиска.
        2. Для каждого элемента arr1 проверяем:
            - содержится ли он в arr2,
            - либо содержится ли в arr2 его перевёрнутая версия.
        3. Подсчитываем количество совпадений.

    Args:
        arr1 (list[int]): Первый массив чисел.
        arr2 (list[int]): Второй массив чисел.

    Returns:
        int: Количество найденных совпадений.
    """
    set2 = set(arr2)
    count = 0

    for num in arr1:
        reversed_num = reverse_number(num)
        if num in set2 or reversed_num in set2:
            count += 1

    return count
